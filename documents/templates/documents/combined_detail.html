{% extends "documents/base.html" %}
{% block title %}Combined Detail · Document Analyzer{% endblock %}

{% block content %}
<div class="flex flex-wrap items-start justify-between gap-4">
    <div class="min-w-0">
        <h1 class="text-xl font-semibold wrap-break-word">{{ cs.title }}</h1>

        <div class="mt-2 flex flex-wrap items-center gap-2 text-xs text-slate-500 dark:text-slate-400">
            <span
                class="inline-flex items-center rounded-full bg-slate-100 px-2 py-1 font-medium text-slate-700 dark:bg-slate-800 dark:text-slate-200">
                {{ cs.doc_count }} docs
            </span>

            <span
                class="inline-flex items-center rounded-full bg-slate-100 px-2 py-1 font-medium text-slate-700 dark:bg-slate-800 dark:text-slate-200">
                {{ cs.total_words }} words
            </span>

            <span class="whitespace-nowrap">
                {{ cs.created_at|date:"j M Y H:i" }}
            </span>
        </div>
    </div>

    <div class="flex items-center gap-2">
        <a class="btn" href="{% url 'documents:chat_notebook' cs.pk %}">Chat</a>
        <a class="btn-outline" href="{% url 'documents:combined_list' %}">Back</a>
    </div>
</div>

<div class="grid grid-cols-1 gap-5 lg:grid-cols-3 mt-5">
    <div class="card p-6 lg:col-span-2">
        <h2 class="text-lg font-semibold">Combined Summary</h2>
        <pre
            class="mt-3 whitespace-pre-wrap rounded-xl bg-slate-100 p-4 text-sm text-slate-800 dark:bg-slate-950 dark:text-slate-200">
{{ cs.combined_summary|default:"(not available)" }}
        </pre>
    </div>

    <div class="card p-6 lg:col-span-1">
        <h2 class="text-lg font-semibold">Included Documents</h2>
        <ul class="mt-3 space-y-2 text-sm">
            {% for d in docs %}
            <li>
                <a class="text-blue-700 hover:underline dark:text-blue-300" href="{% url 'documents:detail' d.pk %}">
                    {{ d.file_name }}
                </a>
                <div class="text-xs text-slate-500 dark:text-slate-400">{{ d.document_type }} • {{ d.word_count }} words
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}