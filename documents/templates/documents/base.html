<!doctype html>
<html lang="en" class="h-full">

<head>
    <meta charset="utf-8" />
    <title>{% block title %}Document Analyzer{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/static/css/tailwind.css">
    <script>
        // theme init (ก่อน render)
        (function () {
            const saved = localStorage.getItem("theme");
            const prefersDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
            const theme = saved || (prefersDark ? "dark" : "light");
            if (theme === "dark") document.documentElement.classList.add("dark");
        })();
        function toggleTheme() {
            const isDark = document.documentElement.classList.toggle("dark");
            localStorage.setItem("theme", isDark ? "dark" : "light");
            // update label
            const el = document.getElementById("themeLabel");
            if (el) el.textContent = isDark ? "Dark" : "Light";
        }
        document.addEventListener("DOMContentLoaded", () => {
            const isDark = document.documentElement.classList.contains("dark");
            const el = document.getElementById("themeLabel");
            if (el) el.textContent = isDark ? "Dark" : "Light";
        });
    </script>
</head>

<body class="h-full bg-slate-50 text-slate-900 dark:bg-slate-950 dark:text-slate-100">
    <header class="border-b border-slate-200 bg-white/70 backdrop-blur dark:border-slate-800 dark:bg-slate-900/60">
        <div class="mx-auto flex max-w-5xl items-center justify-between px-4 py-4">
            <div class="flex items-center gap-3">
                <div class="h-9 w-9 rounded-xl bg-blue-600"></div>
                <div>
                    <div class="text-lg font-semibold leading-tight">Document Analyzer</div>
                    <div class="text-xs text-slate-500 dark:text-slate-400">Local Prototype</div>
                </div>
            </div>

            <div class="flex items-center gap-2">
                <a class="btn-outline" href="{% url 'documents:list' %}">Documents</a>
                <a class="btn" href="{% url 'documents:upload' %}">Upload</a>

                <button type="button" class="btn-outline" onclick="toggleTheme()">
                    Theme: <span id="themeLabel" class="ml-2 font-semibold">—</span>
                </button>
            </div>
        </div>
    </header>

    <main class="mx-auto max-w-5xl px-4 py-6">
        {% block content %}{% endblock %}
    </main>

    <footer class="mx-auto max-w-5xl px-4 pb-8 text-xs text-slate-500 dark:text-slate-400">
        <div class="border-t border-slate-200 pt-4 dark:border-slate-800">
            Prototype — files stored locally in <code class="rounded bg-slate-100 px-1 dark:bg-slate-800">media/</code>
        </div>
    </footer>
</body>

</html>